---
when:
  event: pull_request

steps:
  woodpecker:
    image: woodpeckerci/woodpecker-cli:v3.8.0-alpine
    commands:
      - woodpecker-cli lint --plugins-privileged="woodpeckerci/plugin-docker-buildx" .woodpecker/*.yaml
    when:
      path: .woodpecker/**/*.yaml
    depends_on: []

  dockerfile:
    image: ghcr.io/hadolint/hadolint:v2.12.0
    when:
      path:
        - Dockerfile
    depends_on: []

  cspell:
    image: ghcr.io/streetsidesoftware/cspell:9.0.1
    commands:
      - /usr/local/bin/cspell-cli lint .
    depends_on: []

  golangci-lint:
    image: golangci/golangci-lint:v2.2.2
    commands:
      - golangci-lint run --timeout 15m
    depends_on: []

  renovate:
    image: renovate/renovate:41.40.0
    commands:
      - renovate-config-validator --strict
    when:
      path:
        - renovate.json
        - .woodpecker/lint.yaml
    depends_on: []
